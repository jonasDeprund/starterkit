{"version":3,"sources":["javascript/app.js"],"names":["body","document","MathUtils","lerp","a","b","n","distance","x1","y1","x2","y2","Math","hypot","getMousePos","ev","posx","posy","window","event","pageX","pageY","clientX","clientY","scrollLeft","docEl","scrollTop","x","y","mousePos","lastMousePos","cacheMousePos","addEventListener","getMouseDistance","Image","el","DOM","defaultStyle","scale","opacity","getRect","initEvents","resize","TweenMax","set","rect","getBoundingClientRect","isTweening","style","ImageTrail","content","querySelector","images","querySelectorAll","forEach","img","push","imagesTotal","length","imgPosition","zIndexVal","threshold","requestAnimationFrame","render","showNextImage","isIdle","isActive","killTweensOf","TimelineMax","startAt","zIndex","width","height","to","ease","Expo","easeOut","Power1","Quint","preloadImages","Promise","resolve","reject","imagesLoaded","then","classList","remove"],"mappings":"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","file":"app.26584510.js","sourceRoot":"..","sourcesContent":["/**\n * demo.js\n * http://www.codrops.com\n *\n * Licensed under the MIT license.\n * http://www.opensource.org/licenses/mit-license.php\n *\n * Copyright 2019, Codrops\n * http://www.codrops.com\n */\n{\n  // body element\n  const body = document.body\n\n  // helper functions\n  const MathUtils = {\n    // linear interpolation\n    lerp: (a, b, n) => (1 - n) * a + n * b,\n    // distance between two points\n    distance: (x1, y1, x2, y2) => Math.hypot(x2 - x1, y2 - y1),\n  }\n\n  // get the mouse position\n  const getMousePos = (ev) => {\n    let posx = 0\n    let posy = 0\n    if (!ev) ev = window.event\n    if (ev.pageX || ev.pageY) {\n      posx = ev.pageX\n      posy = ev.pageY\n    } else if (ev.clientX || ev.clientY) {\n      posx = ev.clientX + body.scrollLeft + docEl.scrollLeft\n      posy = ev.clientY + body.scrollTop + docEl.scrollTop\n    }\n    return { x: posx, y: posy }\n  }\n\n  // mousePos: current mouse position\n  // cacheMousePos: previous mouse position\n  // lastMousePos: last last recorded mouse position (at the time the last image was shown)\n  let mousePos = (lastMousePos = cacheMousePos = { x: 0, y: 0 })\n\n  // update the mouse position\n  window.addEventListener('mousemove', (ev) => (mousePos = getMousePos(ev)))\n\n  // gets the distance from the current mouse position to the last recorded mouse position\n  const getMouseDistance = () =>\n    MathUtils.distance(mousePos.x, mousePos.y, lastMousePos.x, lastMousePos.y)\n\n  class Image {\n    constructor(el) {\n      this.DOM = { el: el }\n      // image deafult styles\n      this.defaultStyle = {\n        scale: 1,\n        x: 0,\n        y: 0,\n        opacity: 0,\n      }\n      // get sizes/position\n      this.getRect()\n      // init/bind events\n      this.initEvents()\n    }\n    initEvents() {\n      // on resize get updated sizes/position\n      window.addEventListener('resize', () => this.resize())\n    }\n    resize() {\n      // reset styles\n      TweenMax.set(this.DOM.el, this.defaultStyle)\n      // get sizes/position\n      this.getRect()\n    }\n    getRect() {\n      this.rect = this.DOM.el.getBoundingClientRect()\n    }\n    isActive() {\n      // check if image is animating or if it's visible\n      return TweenMax.isTweening(this.DOM.el) || this.DOM.el.style.opacity != 0\n    }\n  }\n\n  class ImageTrail {\n    constructor() {\n      // images container\n      this.DOM = { content: document.querySelector('.content') }\n      // array of Image objs, one per image element\n      this.images = []\n      ;[...this.DOM.content.querySelectorAll('img')].forEach((img) =>\n        this.images.push(new Image(img))\n      )\n      // total number of images\n      this.imagesTotal = this.images.length\n      // upcoming image index\n      this.imgPosition = 0\n      // zIndex value to apply to the upcoming image\n      this.zIndexVal = 1\n      // mouse distance required to show the next image\n      this.threshold = 100\n      // render the images\n      requestAnimationFrame(() => this.render())\n    }\n    render() {\n      // get distance between the current mouse position and the position of the previous image\n      let distance = getMouseDistance()\n      // cache previous mouse position\n      cacheMousePos.x = MathUtils.lerp(\n        cacheMousePos.x || mousePos.x,\n        mousePos.x,\n        0.1\n      )\n      cacheMousePos.y = MathUtils.lerp(\n        cacheMousePos.y || mousePos.y,\n        mousePos.y,\n        0.1\n      )\n\n      // if the mouse moved more than [this.threshold] then show the next image\n      if (distance > this.threshold) {\n        this.showNextImage()\n\n        ++this.zIndexVal\n        this.imgPosition =\n          this.imgPosition < this.imagesTotal - 1 ? this.imgPosition + 1 : 0\n\n        lastMousePos = mousePos\n      }\n\n      // check when mousemove stops and all images are inactive (not visible and not animating)\n      let isIdle = true\n      for (let img of this.images) {\n        if (img.isActive()) {\n          isIdle = false\n          break\n        }\n      }\n      // reset z-index initial value\n      if (isIdle && this.zIndexVal !== 1) {\n        this.zIndexVal = 1\n      }\n\n      // loop..\n      requestAnimationFrame(() => this.render())\n    }\n    showNextImage() {\n      // show image at position [this.imgPosition]\n      const img = this.images[this.imgPosition]\n      // kill any tween on the image\n      TweenMax.killTweensOf(img.DOM.el)\n\n      new TimelineMax()\n        // show the image\n        .set(\n          img.DOM.el,\n          {\n            startAt: { opacity: 0, scale: 1 },\n            opacity: 1,\n            scale: 1,\n            zIndex: this.zIndexVal,\n            x: cacheMousePos.x - img.rect.width / 2,\n            y: cacheMousePos.y - img.rect.height / 2,\n          },\n          0\n        )\n        // animate position\n        .to(\n          img.DOM.el,\n          0.9,\n          {\n            ease: Expo.easeOut,\n            x: mousePos.x - img.rect.width / 2,\n            y: mousePos.y - img.rect.height / 2,\n          },\n          0\n        )\n        // then make it disappear\n        .to(\n          img.DOM.el,\n          1,\n          {\n            ease: Power1.easeOut,\n            opacity: 0,\n          },\n          0.4\n        )\n        // scale down the image\n        .to(\n          img.DOM.el,\n          1,\n          {\n            ease: Quint.easeOut,\n            scale: 0.2,\n          },\n          0.4\n        )\n    }\n  }\n\n  /***********************************/\n  /********** Preload stuff **********/\n\n  // Preload images\n  const preloadImages = () => {\n    return new Promise((resolve, reject) => {\n      imagesLoaded(document.querySelectorAll('.content__img'), resolve)\n    })\n  }\n\n  // And then..\n  preloadImages().then(() => {\n    // Remove the loader\n    document.body.classList.remove('loading')\n    new ImageTrail()\n  })\n}\n"]}